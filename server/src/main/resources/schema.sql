-- DROP TABLE IF EXISTS "user" CASCADE;
-- DROP TABLE IF EXISTS round CASCADE;
-- DROP TABLE IF EXISTS game CASCADE;
-- DROP TABLE IF EXISTS tip CASCADE;

-- TODO readding tip table and creating admin table

CREATE TABLE IF NOT EXISTS "user"(
     id       UUID default gen_random_uuid() PRIMARY KEY,
     username VARCHAR(50) UNIQUE NOT NULL,
     password VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS game (
    id UUID default gen_random_uuid() PRIMARY KEY,
    word_to_guess VARCHAR(50) NOT NULL,
    description VARCHAR(255),
    created_by VARCHAR(50) REFERENCES "user"(username) NOT NULL
);

CREATE TABLE IF NOT EXISTS round (
     id UUID default gen_random_uuid() PRIMARY KEY,
     attempt INTEGER NOT NULL,
     letters_searched VARCHAR(50) NOT NULL,
     state VARCHAR(30) NOT NULL,
     game_id UUID REFERENCES game(id),
     FOREIGN KEY (game_id) REFERENCES game(id)
);



-- CREATE TABLE IF NOT EXISTS tip (
--     id BIGINT GENERATED BY DEFAULT as IDENTITY,
--     game_id UUID REFERENCES game(id),
--     FOREIGN KEY (game_id) REFERENCES game(id),
--     PRIMARY KEY (id, game_id)
-- )