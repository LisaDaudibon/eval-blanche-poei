-- DROP TABLE IF EXISTS round CASCADE;
-- DROP TABLE IF EXISTS game CASCADE;
-- DROP TABLE IF EXISTS answered_letter CASCADE;
-- DROP TABLE IF EXISTS tip CASCADE;

-- TODO readding tip table and creating admin table

CREATE TABLE IF NOT EXISTS game (
    uuid UUID default gen_random_uuid() PRIMARY KEY,
    word_to_guess VARCHAR(50) NOT NULL,
    description VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS round (
     uuid UUID default gen_random_uuid() PRIMARY KEY,
     attempt INTEGER NOT NULL,
     state VARCHAR(30) NOT NULL,
     game_uuid UUID REFERENCES game(uuid),
     FOREIGN KEY (game_uuid) REFERENCES game(uuid)
);

CREATE TABLE IF NOT EXISTS answered_letter (
     id BIGINT GENERATED BY DEFAULT as IDENTITY,
     round_uuid UUID REFERENCES round(uuid),
     FOREIGN KEY (round_uuid) REFERENCES round(uuid),
     PRIMARY KEY (id, round_uuid)
);

-- CREATE TABLE IF NOT EXISTS tip (
--     id BIGINT GENERATED BY DEFAULT as IDENTITY,
--     game_uuid UUID REFERENCES game(uuid),
--     FOREIGN KEY (game_uuid) REFERENCES game(uuid),
--     PRIMARY KEY (id, game_uuid)
-- )